# Релиз версии 2.1.1

## Как опубликовать новую версию

### 1. Создать и опубликовать тег

```bash
# Создать тег локально
git tag v2.1.1

# Или с описанием
git tag -a v2.1.1 -m "Release version 2.1.1 - PostgreSQL backup and restore tool"

# Отправить тег в репозиторий
git push origin v2.1.1
```

### 2. GitHub Actions автоматически:
- Соберет Docker образ для архитектур linux/amd64 и linux/arm64
- Опубликует образ в GitHub Container Registry (ghcr.io)
- Создаст следующие теги:
  - `ghcr.io/[username]/pgdump-s3:v2.1.1` (полная версия)
  - `ghcr.io/[username]/pgdump-s3:2.1.1` (без префикса v)
  - `ghcr.io/[username]/pgdump-s3:2.1` (мажорная.минорная)
  - `ghcr.io/[username]/pgdump-s3:2` (только мажорная)
  - `ghcr.io/[username]/pgdump-s3:latest` (если тег создан в main ветке)

### 3. Использование образа

```bash
# Использовать конкретную версию
docker pull ghcr.io/[username]/pgdump-s3:v2.1.1

# Или использовать в docker-compose.yml
services:
  postgres-backup:
    image: ghcr.io/[username]/pgdump-s3:v2.1.1
    # ... остальная конфигурация
```

### 4. Проверка статуса сборки

После создания тега:
1. Перейдите в раздел "Actions" в GitHub репозитории
2. Найдите workflow "Build and Push Docker Image"
3. Дождитесь завершения сборки (зеленая галочка)
4. Проверьте, что образ появился в разделе "Packages"

## Changelog v2.1.1

### Новые возможности:
- ✅ Функция восстановления из бэкапа (restore)
- ✅ Поддержка отдельных настроек S3 для восстановления
- ✅ Восстановление по расписанию через cron
- ✅ Выборочное восстановление баз данных
- ✅ Поддержка как SQL, так и custom форматов бэкапа

### Улучшения:
- ✅ Исправлена обработка списка баз данных через запятую
- ✅ Улучшена очистка существующих баз при восстановлении
- ✅ Безопасная работа с CNPG кластерами
- ✅ Добавлен вывод списка баз для бэкапа
- ✅ Единый блок исключения баз данных

### Документация:
- ✅ Обновлен README с примерами восстановления
- ✅ Добавлены примеры CronJob для Kubernetes
- ✅ Обновлены переменные окружения в .env.example
